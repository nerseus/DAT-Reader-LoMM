LOMM Converter Notes

============================================================================================
TODO:
============================================================================================
	- Can't run from scratch with materials - need to be reloaded.
	
	- Use "Rayhit" to decide if something should get a collision mesh
		
	- Objects are mis-rotated:
		Rescue Ruins
			Bench0 (BENCH02)
		
		Blood Feud
			WallTorch23 (TORCH21)	World rotation: Y = -180		Should be -90 	(-90 from given)
			WallTorch52 (TORCH21)	World rotation: Y = 90.4		Should be 0 	(-90 from given)	- manually adjusting puts it inside the wall
			
		DragonBlade
			Dragonpharoh0 (Type=Prop | Model=DRAGONPHAROAH)
		
	- Create "game" script that will position player on a start node to make testing easier
			
	- Create Lights
	
	- Create Sounds
	
	- Create Scene or maybe just prefab?
	
	- Sword in stone:
		DRAGONBLADE.DAT - WorldObjects with filename-looking strings
			SwordInStone0 (SwordInStone) - DimsFile=models\props\stoneHilt.abc
			BlueWater0 (Kato) - SpriteSurfaceName=Sprites\Water\slime.spr

	- Create "Destructable" Prefabs of ABCModels with textures defined by:
		ObjectType = "DestructableProp" or "DestructableBrush"
		WorldObjects with properties:
			CustomTexture and CustomModel
			Seem to be gibs mostly?
				Name (PT_STRING) = UrnGargoyle4
				Filename (PT_STRING) = MODELS\Props\UrnGargoyle.abc
				Skin (PT_STRING) = Skins\Props\UrnGargoyle.dtx
				CustomTexture (PT_STRING) = skins\props\urngargoyle.dtx
				CustomSound (PT_STRING) = Sounds\Events\shatterpotterybig03.wav
				CustomModel (PT_STRING) = models\props\debris\urndebris.abc
				BounceSound (PT_STRING) = 
			
============================================================================================
Notes:
============================================================================================
	Team Number = 0 evil, 1 = good, 3 = monsters

	TranslucentWorldModel and ChromaKey
		Probably not needed...
			TranslucentWorldModel - used to create 2nd material with name suffix "_Chromakey"
				if worldObjectModel.ObjectName == "TranslucentWorldModel" || obj.objectName == "Electricity" || obj.objectName == "Door"
				ChromaKey
					Defined on the "Litech Vertex Transparent" material
					Use the Red value of the Color to indicate transparency: 255 is fully on, 128 is pretty much see through, 114 is "off"
						Green and Blue seem to have no control over transparency
					CAN work with FullBright

	SkyBox
		Shader = "Mobile/Skybox"
			Front/Back/Left/Right 	: Tiling X and Y = 0.975
			Up/Down					: Tiling X and Y = 0.98


	- Materials
		When creating materials - need to lookup:
			Find a BSPModel with a Textures[] reference to it
			If there is one, find the matching WorldObject with the same name as BSPModel. For example, "BlueWater0"
			From the WorldObject properties, look for SurfaceAlpha and use that value to set on the alpha transparency
			Or rather... If SurfaceAlpha exists and < 1 then turn on alpha transparency (from alpha channel of texture).
				COULD turn on alpha and use the "Color" of the material to set transparency - like SurfaceAlpha = 0.7 would set the Color.A = 255 * 0.7
				But that's a uniform alpha blend instead of pulling from PNG


	- Prop research:
		If Properties has "Solid" = false... ? No collision mesh?


	On Wedding day - boxes called "PortalZoneX"
		Shown with DefaultMaterial
		Acting as portals to split up the BSP?
		These are the ONLY items using DefaultMaterial.
		
		Spiders Den:
			DefaultMaterial is only used on AIBarrier:

	Other items with sounds:
		WorldObjectModel with ObjectType = WallTorch
			Translucency = 1.000
				This is the ONLY Translucency value
			FireType = 
				only FireType values are:
					1073741824 <- 4000 0000
					1065353216 <- 3F80 0000


============================================================================================
Recent Fixes:
============================================================================================
	- Y offset seems a bit off?
		Rescue - Oil Lamp
			Original pos = -2446, 24, 1852
			Min/Max Y of ABC model = Min=-9.274498, Max=9.274498.
			
			YPos:				0.48
			Appears to rest at:	0.46
			Diff of 0.02 (unity scale factor).
				Maybe shift everything down by UnityScaleFactor (as this is the equivalent of 1 unit)
			
			Height after adjustment to 0:	0.18548996

	- Create versions of materials that have special transparency properties
		Might be the same texture but different opacity?
		Need naming translation convention so they can be created in one pass and found/referenced later
		
		No Alpha
			All black or all white alpha channel in texture
			Material:
				Surface Type		Opaque
				Alpha Clipping		Off
		
		Clipping only (like LICH)
			All black or white alpha channel (no grey)
			Material:
				Surface Type		Opaque
				Alpha Clipping		On
		
		Transparent (like blue water)
			Some grey in alpha channel (no grey)
			Material:
				Surface Type		Transparent
				Blending Mode		Alpha
				Preserve Specular	Off
				Alpha Clipping		Off
				
		NOTE: Texture never needs alphaIsTransparency = true ?
	- Water and texture to use:
		The water mesh is a BSP object
			The BSP might have a texture:
				Rescue
					BlueWater0		BSP 			1x:		TEXTURES\LevelTextures\Terrain\Ocean.dtx									<-- found 		good
									WorldObject		Type = BlueWater		SpriteSurface = Sprites\Water\water123.spr 					<-- found		bad
													
				Wedding Day							
					BlueWater0		BSP 			1x:		TEXTURES\LevelTextures\Misc\Invisible.dtx									<-- found		bad
									WorldObject		Type = BlueWater		Sprites\water\Water115flowing.spr							<-- not found	bad
					BlueWater1		BSP				1x		TEXTURES\LevelTextures\Misc\Invisible.dtx									<-- found		bad
									WorldObject		Type = BlueWater		Sprites\water\Water115flowing.spr							<-- not found	bad
					WorldObject12	BSP				2x:		Sprites\Water\Water115.spr 		TEXTURES\LevelTextures\Misc\Invisible.dtx	<-- found		good
									WorldObject		Type = WorldObject		n/a															<-- not found	bad
									
				NOTES:
					Sprites\water\Water115flowing.spr			<-- default value for SpriteSurfaceName when binding to BlueWater in DEdit
					
					DEdit:
						Created brush: MyWaterBrush. Material doesn't seem to matter at all.
						Bound to object "BlueWater". Creates:
							BlueWaterThatWasBound		<-- SurfaceAlpha = 0.7 		|		SpriteSurfaceName = Sprites\water\Water115flowing.spr
								MyWaterBrush			<- has texture applied. Tried SPR and grass.dtx. Neither showed in game.
								
						In DAT:
							BlueWaterThatWasBound <- BSP object (makes sense) that has a texture (must have been merged during Process?)
							Other brushes are not named. Presumably part of PhysicsBSP only (with appropriate textures).
							
							WorldObject named BlueWaterThatWasBound <- has the SurfaceAlpha and the SpriteSurfaceName
							
	- Fix console logs:
			Creating WorldObjects for _TEMPLEOFBARK
				ERROR - Object LizardWarrior0 has filename but no skin(s) - could instantiate mesh if we want?
				ERROR - Object LizardWarrior1 has filename but no skin(s) - could instantiate mesh if we want?
				ERROR - Object LizardWarrior2 has filename but no skin(s) - could instantiate mesh if we want?
				ERROR - Object LizardWarrior4 has filename but no skin(s) - could instantiate mesh if we want?
				ERROR - Object LizardWarrior5 has filename but no skin(s) - could instantiate mesh if we want?
			BSP with missing textures:
				Default
			BSP with missing textures:
				TEXTURES\LevelTextures\WallsPlaster\GreyStoneWall.dtx
	- Create versions of materials that use SurfaceAlpha
		
	- Create items first then load into reference objects
		Can skip the create later on

	- Skybox mesh - replace with setting skybox on scene
		- Manual for now

	- Transparency issues - some glass isn't working
		Sword in the stone
			Church window should be 2-sided?
		Manually fixing for now.
		
	- Better grouping of WorldObjects - use WorldObjectType

	- Add WorldObject monobehavior so the created objects can save their key properties
